{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shiva\\\\Desktop\\\\Talk2Me\\\\Talk2me-Frontend\\\\src\\\\components\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport chatContext from '../chatContext/ChatContext';\nimport userContext from '../userContext/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const [cmessage, setCMessage] = useState(\"\");\n  const {\n    sendMessage,\n    messageList\n  } = useContext(chatContext);\n  const {\n    userProfile\n  } = useContext(userContext);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const messageData = {\n      content: cmessage,\n      time: formatTime(new Date()),\n      sender: userProfile\n    };\n    if (cmessage !== \"\") {\n      sendMessage(messageData);\n    }\n    setCMessage('');\n  };\n  const formatTime = date => {\n    return `${date.getHours()}:${date.getMinutes()}`;\n  };\n  const messageEl = useRef(null);\n  useEffect(() => {\n    if (messageEl.current) {\n      const observer = new MutationObserver(mutations => {\n        mutations.forEach(mutation => {\n          const {\n            target\n          } = mutation;\n          target.scroll({\n            top: target.scrollHeight,\n            behavior: 'smooth'\n          });\n        });\n      });\n      observer.observe(messageEl.current, {\n        childList: true\n      });\n      return () => observer.disconnect();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: messageEl,\n      className: \"flex  flex-col scroll-smooth chat-feed overflow-y-scroll  no-scrollbar  m-4 mt-0 pl-5 pb-7 h-3/4\",\n      children: messageList.map((msg, i) => {\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: msg.sender.name === userProfile.name ? \"flex flex-col items-end mb-5\" : \"flex flex-col items-start mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-extralight text-xs\",\n            children: msg.sender.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: msg.sender.name === userProfile.name ? \"flex flex-col shadow-inner shadow-slate-300 rounded-bl-3xl rounded-tr-3xl  rounded-tl-3xl p-3 m-1 bg-blue-300\" : `flex flex-col shadow-inner shadow-slate-300 rounded-br-3xl rounded-tl-3xl ${msg.type === 'alert' ? \"bg-green-200 text-green-900\" : \"bg-white text-black\"} rounded-tr-3xl w-fit p-3 m-1   `,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"overflow-wrap  font-medium mx-2\",\n              children: msg.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 29\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 26\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex absolute  bottom-0 pb-4 px-3 \",\n      style: {\n        width: \"-webkit-fill-available\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        style: {\n          width: \"-webkit-fill-available\"\n        },\n        action: \"\",\n        method: \"post\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex shadow-inner shadow-slate-300 justify-center rounded-2xl  bg-white  \",\n          style: {\n            width: \"-webkit-fill-available\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"message\",\n            value: cmessage,\n            onChange: e => setCMessage(e.target.value),\n            className: \"px-5 rounded-l-2xl bg-transparent focus:outline-none text-lg\",\n            style: {\n              width: \"-webkit-fill-available\"\n            },\n            placeholder: \"Write Your Message..\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"m-2  px-3 py-2 rounded-xl bg-blue-500 hover:opacity-70\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-solid fa-paper-plane text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 115\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(Chat, \"TioCi89tM84GT03yGQI5A/X//ss=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","chatContext","userContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Chat","_s","cmessage","setCMessage","sendMessage","messageList","userProfile","handleSubmit","event","preventDefault","messageData","content","time","formatTime","Date","sender","date","getHours","getMinutes","messageEl","current","observer","MutationObserver","mutations","forEach","mutation","target","scroll","top","scrollHeight","behavior","observe","childList","disconnect","children","ref","className","map","msg","i","name","fileName","_jsxFileName","lineNumber","columnNumber","type","style","width","onSubmit","action","method","id","value","onChange","e","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/shiva/Desktop/Talk2Me/Talk2me-Frontend/src/components/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport chatContext from '../chatContext/ChatContext'\r\nimport userContext from '../userContext/UserContext';\r\nconst Chat = () => {\r\n    const [cmessage, setCMessage] = useState(\"\");\r\n    const { sendMessage, messageList } = useContext(chatContext);\r\n    const { userProfile } = useContext(userContext);\r\n\r\n\r\n\r\n\r\n    const handleSubmit = async (event) => {\r\n\r\n        event.preventDefault();\r\n\r\n        const messageData = {\r\n            content: cmessage,\r\n            time: formatTime(new Date()),\r\n            sender: userProfile\r\n        };\r\n\r\n        if (cmessage !== \"\") { sendMessage(messageData); }\r\n        setCMessage('');\r\n\r\n    }\r\n\r\n    const formatTime = (date) => {\r\n        return `${date.getHours()}:${date.getMinutes()}`;\r\n    }\r\n    const messageEl = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n        if (messageEl.current) {\r\n            const observer = new MutationObserver((mutations) => {\r\n                mutations.forEach((mutation) => {\r\n                    const { target } = mutation;\r\n                    target.scroll({ top: target.scrollHeight, behavior: 'smooth' });\r\n                });\r\n            });\r\n\r\n            observer.observe(messageEl.current, { childList: true });\r\n\r\n            return () => observer.disconnect();\r\n        }\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <>\r\n            <div ref={messageEl} className=\"flex  flex-col scroll-smooth chat-feed overflow-y-scroll  no-scrollbar  m-4 mt-0 pl-5 pb-7 h-3/4\">\r\n\r\n                {messageList.map((msg, i) => {\r\n\r\n                    return (\r\n                        (<ul className={msg.sender.name === userProfile.name ? \"flex flex-col items-end mb-5\" : \"flex flex-col items-start mb-5\"} key={i}>\r\n\r\n                            <span className='font-extralight text-xs'>{msg.sender.name}</span>\r\n                            <li className={msg.sender.name === userProfile.name ? \"flex flex-col shadow-inner shadow-slate-300 rounded-bl-3xl rounded-tr-3xl  rounded-tl-3xl p-3 m-1 bg-blue-300\" : `flex flex-col shadow-inner shadow-slate-300 rounded-br-3xl rounded-tl-3xl ${msg.type === 'alert' ? \"bg-green-200 text-green-900\" : \"bg-white text-black\"} rounded-tr-3xl w-fit p-3 m-1   `}>\r\n                                <p className=\"overflow-wrap  font-medium mx-2\">{msg.content}</p>\r\n                            </li>\r\n\r\n                        </ul>)\r\n\r\n                    );\r\n\r\n                })}\r\n\r\n\r\n            </div>\r\n            <div className=\"flex absolute  bottom-0 pb-4 px-3 \" style={{ width: \"-webkit-fill-available\" }}>\r\n                <form onSubmit={handleSubmit} style={{ width: \"-webkit-fill-available\" }} action=\"\" method='post'>\r\n                    <div className=\"flex shadow-inner shadow-slate-300 justify-center rounded-2xl  bg-white  \" style={{ width: \"-webkit-fill-available\" }}>\r\n                        <input type=\"text\" id=\"message\" value={cmessage} onChange={(e) => setCMessage(e.target.value)} className='px-5 rounded-l-2xl bg-transparent focus:outline-none text-lg' style={{ width: \"-webkit-fill-available\" }} placeholder='Write Your Message..' />\r\n                        <button type='submit' className='m-2  px-3 py-2 rounded-xl bg-blue-500 hover:opacity-70' ><i className=\"fa-solid fa-paper-plane text-white\"></i></button>\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}